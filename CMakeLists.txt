cmake_minimum_required(VERSION 3.11)

project(OpenSSL VERSION 3.1)

execute_process(COMMAND "perl" "Configure"
        COMMAND "make"
        WORKING_DIRECTORY ${PROJECT_SOURCE_DIR})

set(BUILD_SHARED_LIBS OFF PARENT_SCOPE)
set(CMAKE_FIND_LIBRARY_SUFFIXES ".a" PARENT_SCOPE)

set(OPENSSL_INCLUDE_DIR ${PROJECT_SOURCE_DIR}/include PARENT_SCOPE)
set(OPENSSL_LIBRARIES libcrypto libssl PARENT_SCOPE)
set(OPENSSL_CRYPTO_LIBRARY libcrypto PARENT_SCOPE)
set(OPENSSL_SSL_LIBRARY libssl PARENT_SCOPE)

find_library(OpenSSL NAMES OpenSSL HINTS "${PROJECT_SOURCE_DIR}")